IMPORT JAVA.IO.FILEREADER;
IMPORT JAVA.IO.FILEWRITER;
IMPORT JAVA.IO.IOEXCEPTION;


PUBLIC CLASS TEXTCASETOOL{
    PUBLIC STATIC VOID MAIN(STRING[] ARGS){
        IF(ARGS.LENGTH == 1 && ARGS[0].EQUALS("--HELP")){
            SYSTEM.OUT.PRINTLN("\NTHIS PROGRAM CONVERTS THE TEXT OF A FILE TO UPPERCASE OR LOWERCASE DEPENDING ON THE OPTION PASSED.\N");
            SYSTEM.OUT.PRINTLN("PASS THE FILE NAME, LIKE EXAMPLE.TXT, AND AN OPTION:");
            SYSTEM.OUT.PRINTLN("--UPPERCASE OR -U\N\TA FILE NAMED EXAMPLE_UP.TXT WILL BE CREATED.");
            SYSTEM.OUT.PRINTLN("--LOWERCASE OR -L\N\TA FILE NAMED EXAMPLE_LOW.TXT WILL BE CREATED.\N");
            RETURN;
        }

        IF(ARGS.LENGTH < 2){
            SYSTEM.OUT.PRINTLN("YOU MUST PROVIDE A FILE AND AN OPTION AS ARGUMENTS.\NUSE --HELP TO MORE INFOMATION");
            RETURN;
        }

        STRING INPUTFILENAME = ARGS[0];
        STRING OPTION = ARGS[1];

        STRINGBUILDER CONTENT = NEW STRINGBUILDER();

        TRY{
            
            FILEREADER READER = NEW FILEREADER(INPUTFILENAME);
            INT CHARACTERE;
            
            STRING OUTPUTFILENAME;

            IF(OPTION.EQUALS("-U") || OPTION.EQUALS("--UPPERCASE")){

                OUTPUTFILENAME = INPUTFILENAME.SPLIT("\\.")[0] + "_UP.TXT";

                WHILE((CHARACTERE = READER.READ()) != -1){
                    CHAR UPPERCASECHAR = CHARACTER.TOUPPERCASE((CHAR) CHARACTERE);
                    CONTENT.APPEND(UPPERCASECHAR);
                }
            }ELSE
            IF(OPTION.EQUALS("-L") || OPTION.EQUALS("--LOWERCASE")){
                
                OUTPUTFILENAME = INPUTFILENAME.SPLIT("\\.")[0] + "_LOW.TXT";

                WHILE((CHARACTERE = READER.READ()) != -1){
                    CHAR UPPERCASECHAR = CHARACTER.TOLOWERCASE((CHAR) CHARACTERE);
                    CONTENT.APPEND(UPPERCASECHAR);
                }
            }ELSE{
                SYSTEM.OUT.PRINTLN("YOU MUST PASS A VALID OPTION LIKE --UPPERCASE OR --LOWERCASE");
                RETURN;
            }

            READER.CLOSE(); 

            FILEWRITER WRITER = NEW FILEWRITER(OUTPUTFILENAME);

            WRITER.WRITE(CONTENT.TOSTRING());
            
            WRITER.CLOSE();

            SYSTEM.OUT.PRINTLN("SUCCESSFULLY CONVERTED FILE!");
            
        } CATCH (IOEXCEPTION E) {
            E.PRINTSTACKTRACE();
        }

    }
}